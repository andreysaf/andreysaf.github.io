<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>How to Migrate Next.js or React Project Using react-ga to GA4?</title><link rel="icon" href="/favicon.ico"/><link rel="canonical" href="https://andreysafonov.com/blog/how-to-migrate-nextjs-react-ga4"/><meta name="Description" content="In this blog we will go over how to transition your Next.js web app to GA4 using react-ga4."/><meta name="author" content="Andrey Safonov"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/27d177a30947857b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/27d177a30947857b.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-142b544ab8f7e710.js" defer=""></script><script src="/_next/static/chunks/framework-b759e809ec16812b.js" defer=""></script><script src="/_next/static/chunks/main-1312a74fed987a6a.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4166a6b3c6b19e07.js" defer=""></script><script src="/_next/static/chunks/530-d0ce99da3fc67a00.js" defer=""></script><script src="/_next/static/chunks/606-8cb6c4acf8decc4a.js" defer=""></script><script src="/_next/static/chunks/pages/blog/how-to-migrate-nextjs-react-ga4-f39b8b26d60220b3.js" defer=""></script><script src="/_next/static/edh5nBDpJ_MxrmNTg5BEV/_buildManifest.js" defer=""></script><script src="/_next/static/edh5nBDpJ_MxrmNTg5BEV/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global rh8y69">:host,:root,[data-theme]{--chakra-ring-inset:var(--chakra-empty,/*!*/ /*!*/);--chakra-ring-offset-width:0px;--chakra-ring-offset-color:#fff;--chakra-ring-color:rgba(66, 153, 225, 0.6);--chakra-ring-offset-shadow:0 0 #0000;--chakra-ring-shadow:0 0 #0000;--chakra-space-x-reverse:0;--chakra-space-y-reverse:0;--chakra-colors-transparent:transparent;--chakra-colors-current:currentColor;--chakra-colors-black:#000000;--chakra-colors-white:#FFFFFF;--chakra-colors-whiteAlpha-50:rgba(255, 255, 255, 0.04);--chakra-colors-whiteAlpha-100:rgba(255, 255, 255, 0.06);--chakra-colors-whiteAlpha-200:rgba(255, 255, 255, 0.08);--chakra-colors-whiteAlpha-300:rgba(255, 255, 255, 0.16);--chakra-colors-whiteAlpha-400:rgba(255, 255, 255, 0.24);--chakra-colors-whiteAlpha-500:rgba(255, 255, 255, 0.36);--chakra-colors-whiteAlpha-600:rgba(255, 255, 255, 0.48);--chakra-colors-whiteAlpha-700:rgba(255, 255, 255, 0.64);--chakra-colors-whiteAlpha-800:rgba(255, 255, 255, 0.80);--chakra-colors-whiteAlpha-900:rgba(255, 255, 255, 0.92);--chakra-colors-blackAlpha-50:rgba(0, 0, 0, 0.04);--chakra-colors-blackAlpha-100:rgba(0, 0, 0, 0.06);--chakra-colors-blackAlpha-200:rgba(0, 0, 0, 0.08);--chakra-colors-blackAlpha-300:rgba(0, 0, 0, 0.16);--chakra-colors-blackAlpha-400:rgba(0, 0, 0, 0.24);--chakra-colors-blackAlpha-500:rgba(0, 0, 0, 0.36);--chakra-colors-blackAlpha-600:rgba(0, 0, 0, 0.48);--chakra-colors-blackAlpha-700:rgba(0, 0, 0, 0.64);--chakra-colors-blackAlpha-800:rgba(0, 0, 0, 0.80);--chakra-colors-blackAlpha-900:rgba(0, 0, 0, 0.92);--chakra-colors-gray-50:#F7FAFC;--chakra-colors-gray-100:#EDF2F7;--chakra-colors-gray-200:#E2E8F0;--chakra-colors-gray-300:#CBD5E0;--chakra-colors-gray-400:#A0AEC0;--chakra-colors-gray-500:#718096;--chakra-colors-gray-600:#4A5568;--chakra-colors-gray-700:#2D3748;--chakra-colors-gray-800:#1A202C;--chakra-colors-gray-900:#171923;--chakra-colors-red-50:#FFF5F5;--chakra-colors-red-100:#FED7D7;--chakra-colors-red-200:#FEB2B2;--chakra-colors-red-300:#FC8181;--chakra-colors-red-400:#F56565;--chakra-colors-red-500:#E53E3E;--chakra-colors-red-600:#C53030;--chakra-colors-red-700:#9B2C2C;--chakra-colors-red-800:#822727;--chakra-colors-red-900:#63171B;--chakra-colors-orange-50:#FFFAF0;--chakra-colors-orange-100:#FEEBC8;--chakra-colors-orange-200:#FBD38D;--chakra-colors-orange-300:#F6AD55;--chakra-colors-orange-400:#ED8936;--chakra-colors-orange-500:#DD6B20;--chakra-colors-orange-600:#C05621;--chakra-colors-orange-700:#9C4221;--chakra-colors-orange-800:#7B341E;--chakra-colors-orange-900:#652B19;--chakra-colors-yellow-50:#FFFFF0;--chakra-colors-yellow-100:#FEFCBF;--chakra-colors-yellow-200:#FAF089;--chakra-colors-yellow-300:#F6E05E;--chakra-colors-yellow-400:#ECC94B;--chakra-colors-yellow-500:#D69E2E;--chakra-colors-yellow-600:#B7791F;--chakra-colors-yellow-700:#975A16;--chakra-colors-yellow-800:#744210;--chakra-colors-yellow-900:#5F370E;--chakra-colors-green-50:#F0FFF4;--chakra-colors-green-100:#C6F6D5;--chakra-colors-green-200:#9AE6B4;--chakra-colors-green-300:#68D391;--chakra-colors-green-400:#48BB78;--chakra-colors-green-500:#38A169;--chakra-colors-green-600:#2F855A;--chakra-colors-green-700:#276749;--chakra-colors-green-800:#22543D;--chakra-colors-green-900:#1C4532;--chakra-colors-teal-50:#E6FFFA;--chakra-colors-teal-100:#B2F5EA;--chakra-colors-teal-200:#81E6D9;--chakra-colors-teal-300:#4FD1C5;--chakra-colors-teal-400:#38B2AC;--chakra-colors-teal-500:#319795;--chakra-colors-teal-600:#2C7A7B;--chakra-colors-teal-700:#285E61;--chakra-colors-teal-800:#234E52;--chakra-colors-teal-900:#1D4044;--chakra-colors-blue-50:#ebf8ff;--chakra-colors-blue-100:#bee3f8;--chakra-colors-blue-200:#90cdf4;--chakra-colors-blue-300:#63b3ed;--chakra-colors-blue-400:#4299e1;--chakra-colors-blue-500:#3182ce;--chakra-colors-blue-600:#2b6cb0;--chakra-colors-blue-700:#2c5282;--chakra-colors-blue-800:#2a4365;--chakra-colors-blue-900:#1A365D;--chakra-colors-cyan-50:#EDFDFD;--chakra-colors-cyan-100:#C4F1F9;--chakra-colors-cyan-200:#9DECF9;--chakra-colors-cyan-300:#76E4F7;--chakra-colors-cyan-400:#0BC5EA;--chakra-colors-cyan-500:#00B5D8;--chakra-colors-cyan-600:#00A3C4;--chakra-colors-cyan-700:#0987A0;--chakra-colors-cyan-800:#086F83;--chakra-colors-cyan-900:#065666;--chakra-colors-purple-50:#FAF5FF;--chakra-colors-purple-100:#E9D8FD;--chakra-colors-purple-200:#D6BCFA;--chakra-colors-purple-300:#B794F4;--chakra-colors-purple-400:#9F7AEA;--chakra-colors-purple-500:#805AD5;--chakra-colors-purple-600:#6B46C1;--chakra-colors-purple-700:#553C9A;--chakra-colors-purple-800:#44337A;--chakra-colors-purple-900:#322659;--chakra-colors-pink-50:#FFF5F7;--chakra-colors-pink-100:#FED7E2;--chakra-colors-pink-200:#FBB6CE;--chakra-colors-pink-300:#F687B3;--chakra-colors-pink-400:#ED64A6;--chakra-colors-pink-500:#D53F8C;--chakra-colors-pink-600:#B83280;--chakra-colors-pink-700:#97266D;--chakra-colors-pink-800:#702459;--chakra-colors-pink-900:#521B41;--chakra-borders-none:0;--chakra-borders-1px:1px solid;--chakra-borders-2px:2px solid;--chakra-borders-4px:4px solid;--chakra-borders-8px:8px solid;--chakra-fonts-heading:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--chakra-fonts-body:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--chakra-fonts-mono:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--chakra-fontSizes-3xs:0.45rem;--chakra-fontSizes-2xs:0.625rem;--chakra-fontSizes-xs:0.75rem;--chakra-fontSizes-sm:0.875rem;--chakra-fontSizes-md:1rem;--chakra-fontSizes-lg:1.125rem;--chakra-fontSizes-xl:1.25rem;--chakra-fontSizes-2xl:1.5rem;--chakra-fontSizes-3xl:1.875rem;--chakra-fontSizes-4xl:2.25rem;--chakra-fontSizes-5xl:3rem;--chakra-fontSizes-6xl:3.75rem;--chakra-fontSizes-7xl:4.5rem;--chakra-fontSizes-8xl:6rem;--chakra-fontSizes-9xl:8rem;--chakra-fontWeights-hairline:100;--chakra-fontWeights-thin:200;--chakra-fontWeights-light:300;--chakra-fontWeights-normal:400;--chakra-fontWeights-medium:500;--chakra-fontWeights-semibold:600;--chakra-fontWeights-bold:700;--chakra-fontWeights-extrabold:800;--chakra-fontWeights-black:900;--chakra-letterSpacings-tighter:-0.05em;--chakra-letterSpacings-tight:-0.025em;--chakra-letterSpacings-normal:0;--chakra-letterSpacings-wide:0.025em;--chakra-letterSpacings-wider:0.05em;--chakra-letterSpacings-widest:0.1em;--chakra-lineHeights-3:.75rem;--chakra-lineHeights-4:1rem;--chakra-lineHeights-5:1.25rem;--chakra-lineHeights-6:1.5rem;--chakra-lineHeights-7:1.75rem;--chakra-lineHeights-8:2rem;--chakra-lineHeights-9:2.25rem;--chakra-lineHeights-10:2.5rem;--chakra-lineHeights-normal:normal;--chakra-lineHeights-none:1;--chakra-lineHeights-shorter:1.25;--chakra-lineHeights-short:1.375;--chakra-lineHeights-base:1.5;--chakra-lineHeights-tall:1.625;--chakra-lineHeights-taller:2;--chakra-radii-none:0;--chakra-radii-sm:0.125rem;--chakra-radii-base:0.25rem;--chakra-radii-md:0.375rem;--chakra-radii-lg:0.5rem;--chakra-radii-xl:0.75rem;--chakra-radii-2xl:1rem;--chakra-radii-3xl:1.5rem;--chakra-radii-full:9999px;--chakra-space-1:0.25rem;--chakra-space-2:0.5rem;--chakra-space-3:0.75rem;--chakra-space-4:1rem;--chakra-space-5:1.25rem;--chakra-space-6:1.5rem;--chakra-space-7:1.75rem;--chakra-space-8:2rem;--chakra-space-9:2.25rem;--chakra-space-10:2.5rem;--chakra-space-12:3rem;--chakra-space-14:3.5rem;--chakra-space-16:4rem;--chakra-space-20:5rem;--chakra-space-24:6rem;--chakra-space-28:7rem;--chakra-space-32:8rem;--chakra-space-36:9rem;--chakra-space-40:10rem;--chakra-space-44:11rem;--chakra-space-48:12rem;--chakra-space-52:13rem;--chakra-space-56:14rem;--chakra-space-60:15rem;--chakra-space-64:16rem;--chakra-space-72:18rem;--chakra-space-80:20rem;--chakra-space-96:24rem;--chakra-space-px:1px;--chakra-space-0-5:0.125rem;--chakra-space-1-5:0.375rem;--chakra-space-2-5:0.625rem;--chakra-space-3-5:0.875rem;--chakra-shadows-xs:0 0 0 1px rgba(0, 0, 0, 0.05);--chakra-shadows-sm:0 1px 2px 0 rgba(0, 0, 0, 0.05);--chakra-shadows-base:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);--chakra-shadows-md:0 4px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06);--chakra-shadows-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);--chakra-shadows-xl:0 20px 25px -5px rgba(0, 0, 0, 0.1),0 10px 10px -5px rgba(0, 0, 0, 0.04);--chakra-shadows-2xl:0 25px 50px -12px rgba(0, 0, 0, 0.25);--chakra-shadows-outline:0 0 0 3px rgba(66, 153, 225, 0.6);--chakra-shadows-inner:inset 0 2px 4px 0 rgba(0,0,0,0.06);--chakra-shadows-none:none;--chakra-shadows-dark-lg:rgba(0, 0, 0, 0.1) 0px 0px 0px 1px,rgba(0, 0, 0, 0.2) 0px 5px 10px,rgba(0, 0, 0, 0.4) 0px 15px 40px;--chakra-sizes-1:0.25rem;--chakra-sizes-2:0.5rem;--chakra-sizes-3:0.75rem;--chakra-sizes-4:1rem;--chakra-sizes-5:1.25rem;--chakra-sizes-6:1.5rem;--chakra-sizes-7:1.75rem;--chakra-sizes-8:2rem;--chakra-sizes-9:2.25rem;--chakra-sizes-10:2.5rem;--chakra-sizes-12:3rem;--chakra-sizes-14:3.5rem;--chakra-sizes-16:4rem;--chakra-sizes-20:5rem;--chakra-sizes-24:6rem;--chakra-sizes-28:7rem;--chakra-sizes-32:8rem;--chakra-sizes-36:9rem;--chakra-sizes-40:10rem;--chakra-sizes-44:11rem;--chakra-sizes-48:12rem;--chakra-sizes-52:13rem;--chakra-sizes-56:14rem;--chakra-sizes-60:15rem;--chakra-sizes-64:16rem;--chakra-sizes-72:18rem;--chakra-sizes-80:20rem;--chakra-sizes-96:24rem;--chakra-sizes-px:1px;--chakra-sizes-0-5:0.125rem;--chakra-sizes-1-5:0.375rem;--chakra-sizes-2-5:0.625rem;--chakra-sizes-3-5:0.875rem;--chakra-sizes-max:max-content;--chakra-sizes-min:min-content;--chakra-sizes-full:100%;--chakra-sizes-3xs:14rem;--chakra-sizes-2xs:16rem;--chakra-sizes-xs:20rem;--chakra-sizes-sm:24rem;--chakra-sizes-md:28rem;--chakra-sizes-lg:32rem;--chakra-sizes-xl:36rem;--chakra-sizes-2xl:42rem;--chakra-sizes-3xl:48rem;--chakra-sizes-4xl:56rem;--chakra-sizes-5xl:64rem;--chakra-sizes-6xl:72rem;--chakra-sizes-7xl:80rem;--chakra-sizes-8xl:90rem;--chakra-sizes-prose:60ch;--chakra-sizes-container-sm:640px;--chakra-sizes-container-md:768px;--chakra-sizes-container-lg:1024px;--chakra-sizes-container-xl:1280px;--chakra-zIndices-hide:-1;--chakra-zIndices-auto:auto;--chakra-zIndices-base:0;--chakra-zIndices-docked:10;--chakra-zIndices-dropdown:1000;--chakra-zIndices-sticky:1100;--chakra-zIndices-banner:1200;--chakra-zIndices-overlay:1300;--chakra-zIndices-modal:1400;--chakra-zIndices-popover:1500;--chakra-zIndices-skipLink:1600;--chakra-zIndices-toast:1700;--chakra-zIndices-tooltip:1800;--chakra-transition-property-common:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform;--chakra-transition-property-colors:background-color,border-color,color,fill,stroke;--chakra-transition-property-dimensions:width,height;--chakra-transition-property-position:left,right,top,bottom;--chakra-transition-property-background:background-color,background-image,background-position;--chakra-transition-easing-ease-in:cubic-bezier(0.4, 0, 1, 1);--chakra-transition-easing-ease-out:cubic-bezier(0, 0, 0.2, 1);--chakra-transition-easing-ease-in-out:cubic-bezier(0.4, 0, 0.2, 1);--chakra-transition-duration-ultra-fast:50ms;--chakra-transition-duration-faster:100ms;--chakra-transition-duration-fast:150ms;--chakra-transition-duration-normal:200ms;--chakra-transition-duration-slow:300ms;--chakra-transition-duration-slower:400ms;--chakra-transition-duration-ultra-slow:500ms;--chakra-blur-none:0;--chakra-blur-sm:4px;--chakra-blur-base:8px;--chakra-blur-md:12px;--chakra-blur-lg:16px;--chakra-blur-xl:24px;--chakra-blur-2xl:40px;--chakra-blur-3xl:64px;--chakra-breakpoints-base:0em;--chakra-breakpoints-sm:30em;--chakra-breakpoints-md:48em;--chakra-breakpoints-lg:62em;--chakra-breakpoints-xl:80em;--chakra-breakpoints-2xl:96em;}.chakra-ui-light :host:not([data-theme]),.chakra-ui-light :root:not([data-theme]),.chakra-ui-light [data-theme]:not([data-theme]),[data-theme=light] :host:not([data-theme]),[data-theme=light] :root:not([data-theme]),[data-theme=light] [data-theme]:not([data-theme]),:host[data-theme=light],:root[data-theme=light],[data-theme][data-theme=light]{--chakra-colors-chakra-body-text:var(--chakra-colors-gray-800);--chakra-colors-chakra-body-bg:var(--chakra-colors-white);--chakra-colors-chakra-border-color:var(--chakra-colors-gray-200);--chakra-colors-chakra-inverse-text:var(--chakra-colors-white);--chakra-colors-chakra-subtle-bg:var(--chakra-colors-gray-100);--chakra-colors-chakra-subtle-text:var(--chakra-colors-gray-600);--chakra-colors-chakra-placeholder-color:var(--chakra-colors-gray-500);}.chakra-ui-dark :host:not([data-theme]),.chakra-ui-dark :root:not([data-theme]),.chakra-ui-dark [data-theme]:not([data-theme]),[data-theme=dark] :host:not([data-theme]),[data-theme=dark] :root:not([data-theme]),[data-theme=dark] [data-theme]:not([data-theme]),:host[data-theme=dark],:root[data-theme=dark],[data-theme][data-theme=dark]{--chakra-colors-chakra-body-text:var(--chakra-colors-whiteAlpha-900);--chakra-colors-chakra-body-bg:var(--chakra-colors-gray-800);--chakra-colors-chakra-border-color:var(--chakra-colors-whiteAlpha-300);--chakra-colors-chakra-inverse-text:var(--chakra-colors-gray-800);--chakra-colors-chakra-subtle-bg:var(--chakra-colors-gray-700);--chakra-colors-chakra-subtle-text:var(--chakra-colors-gray-400);--chakra-colors-chakra-placeholder-color:var(--chakra-colors-whiteAlpha-400);}</style><style data-emotion="css-global fubdgu">html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:system-ui,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;-moz-osx-font-smoothing:grayscale;touch-action:manipulation;}body{position:relative;min-height:100%;margin:0;font-feature-settings:"kern";}:where(*, *::before, *::after){border-width:0;border-style:solid;box-sizing:border-box;word-wrap:break-word;}main{display:block;}hr{border-top-width:1px;box-sizing:content-box;height:0;overflow:visible;}:where(pre, code, kbd,samp){font-family:SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:1em;}a{background-color:transparent;color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit;}abbr[title]{border-bottom:none;-webkit-text-decoration:underline;text-decoration:underline;-webkit-text-decoration:underline dotted;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;}:where(b, strong){font-weight:bold;}small{font-size:80%;}:where(sub,sup){font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}:where(button, input, optgroup, select, textarea){font-family:inherit;font-size:100%;line-height:1.15;margin:0;}:where(button, input){overflow:visible;}:where(button, select){text-transform:none;}:where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ){border-style:none;padding:0;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}:where([type="checkbox"], [type="radio"]){box-sizing:border-box;padding:0;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{-webkit-appearance:none!important;}input[type="number"]{-moz-appearance:textfield;}input[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}input[type="search"]::-webkit-search-decoration{-webkit-appearance:none!important;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}template{display:none;}[hidden]{display:none!important;}:where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ){margin:0;}button{background:transparent;padding:0;}fieldset{margin:0;padding:0;}:where(ol, ul){margin:0;padding:0;}textarea{resize:vertical;}:where(button, [role="button"]){cursor:pointer;}button::-moz-focus-inner{border:0!important;}table{border-collapse:collapse;}:where(h1, h2, h3, h4, h5, h6){font-size:inherit;font-weight:inherit;}:where(button, input, optgroup, select, textarea){padding:0;line-height:inherit;color:inherit;}:where(img, svg, video, canvas, audio, iframe, embed, object){display:block;}:where(img, video){max-width:100%;height:auto;}[data-js-focus-visible] :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ){outline:none;box-shadow:none;}select::-ms-expand{display:none;}:root,:host{--chakra-vh:100vh;}@supports (height: -webkit-fill-available){:root,:host{--chakra-vh:-webkit-fill-available;}}@supports (height: -moz-fill-available){:root,:host{--chakra-vh:-moz-fill-available;}}@supports (height: 100dvh){:root,:host{--chakra-vh:100dvh;}}</style><style data-emotion="css-global 1cgn62j">body{font-family:var(--chakra-fonts-body);color:var(--chakra-colors-chakra-body-text);background:var(--chakra-colors-chakra-body-bg);transition-property:background-color;transition-duration:var(--chakra-transition-duration-normal);line-height:var(--chakra-lineHeights-base);}*::-webkit-input-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*::-moz-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*:-ms-input-placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*::placeholder{color:var(--chakra-colors-chakra-placeholder-color);}*,*::before,::after{border-color:var(--chakra-colors-chakra-border-color);}</style><div><div class="css-0"><style data-emotion="css 1v5zkfs">.css-1v5zkfs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background:var(--chakra-colors-white);color:var(--chakra-colors-gray-600);min-height:60px;padding-top:var(--chakra-space-2);padding-bottom:var(--chakra-space-2);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);border-bottom:1px;border-style:solid;border-color:var(--chakra-colors-gray-200);}</style><div class="css-1v5zkfs"><style data-emotion="css 13yncan">.css-13yncan{-webkit-flex:1;-ms-flex:1;flex:1;margin-left:calc(var(--chakra-space-2) * -1);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}@media screen and (min-width: 48em){.css-13yncan{-webkit-flex:auto;-ms-flex:auto;flex:auto;display:none;}}</style><div class="css-13yncan"><style data-emotion="css zzezgs">.css-zzezgs{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--chakra-radii-md);font-weight:var(--chakra-fontWeights-semibold);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);font-size:var(--chakra-fontSizes-md);color:var(--chakra-colors-gray-800);-webkit-padding-start:0px;padding-inline-start:0px;-webkit-padding-end:0px;padding-inline-end:0px;padding-top:0px;padding-bottom:0px;}.css-zzezgs:focus-visible,.css-zzezgs[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-zzezgs:disabled,.css-zzezgs[disabled],.css-zzezgs[aria-disabled=true],.css-zzezgs[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-zzezgs:hover,.css-zzezgs[data-hover]{background:var(--chakra-colors-gray-100);}.css-zzezgs:hover:disabled,.css-zzezgs[data-hover]:disabled,.css-zzezgs:hover[disabled],.css-zzezgs[data-hover][disabled],.css-zzezgs:hover[aria-disabled=true],.css-zzezgs[data-hover][aria-disabled=true],.css-zzezgs:hover[data-disabled],.css-zzezgs[data-hover][data-disabled]{background:initial;}.css-zzezgs:active,.css-zzezgs[data-active]{background:var(--chakra-colors-gray-200);}</style><button type="button" class="chakra-button css-zzezgs" aria-label="Toggle Navigation"><style data-emotion="css n4g5d6">.css-n4g5d6{display:inline-block;line-height:1em;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;color:currentColor;vertical-align:middle;width:var(--chakra-sizes-5);height:var(--chakra-sizes-5);}</style><svg viewBox="0 0 24 24" focusable="false" class="chakra-icon css-n4g5d6" aria-hidden="true"><path fill="currentColor" d="M 3 5 A 1.0001 1.0001 0 1 0 3 7 L 21 7 A 1.0001 1.0001 0 1 0 21 5 L 3 5 z M 3 11 A 1.0001 1.0001 0 1 0 3 13 L 21 13 A 1.0001 1.0001 0 1 0 21 11 L 3 11 z M 3 17 A 1.0001 1.0001 0 1 0 3 19 L 21 19 A 1.0001 1.0001 0 1 0 21 17 L 3 17 z"></path></svg></button></div><style data-emotion="css 1ef8uzr">.css-1ef8uzr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex:1;-ms-flex:1;flex:1;}@media screen and (min-width: 48em){.css-1ef8uzr{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:start;justify-content:start;}}</style><div class="css-1ef8uzr"><style data-emotion="css dho3mt">.css-dho3mt{display:none;}@media screen and (min-width: 48em){.css-dho3mt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="css-dho3mt"><style data-emotion="css d9vnmu">.css-d9vnmu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:var(--chakra-space-4);}</style><div class="chakra-stack css-d9vnmu"><div class="css-0"><style data-emotion="css 14frppw">.css-14frppw{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;padding:var(--chakra-space-2);font-size:var(--chakra-fontSizes-sm);font-weight:500;color:var(--chakra-colors-gray-600);}.css-14frppw:focus-visible,.css-14frppw[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-14frppw:hover,.css-14frppw[data-hover]{-webkit-text-decoration:none;text-decoration:none;color:var(--chakra-colors-gray-800);}</style><a class="chakra-link css-14frppw" href="/" id="popover-trigger-:R9lad9f6H1:" aria-haspopup="dialog" aria-expanded="false" aria-controls="popover-content-:R9lad9f6H1:">Home</a></div><div class="css-0"><a class="chakra-link css-14frppw" href="/portfolio" id="popover-trigger-:Ralad9f6H1:" aria-haspopup="dialog" aria-expanded="false" aria-controls="popover-content-:Ralad9f6H1:">Portfolio</a></div><div class="css-0"><a class="chakra-link css-14frppw" href="/blog" id="popover-trigger-:Rblad9f6H1:" aria-haspopup="dialog" aria-expanded="false" aria-controls="popover-content-:Rblad9f6H1:">Blog</a></div></div></div></div><style data-emotion="css ilx5iv">.css-ilx5iv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:var(--chakra-space-6);-webkit-flex:1;-ms-flex:1;flex:1;}@media screen and (min-width: 48em){.css-ilx5iv{-webkit-flex:0;-ms-flex:0;flex:0;}}</style><div class="chakra-stack css-ilx5iv"><style data-emotion="css spn4bz">.css-spn4bz{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:inherit;}.css-spn4bz:hover,.css-spn4bz[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-spn4bz:focus-visible,.css-spn4bz[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}</style><a class="chakra-link css-spn4bz" href="https://www.linkedin.com/in/andreysaf/"><style data-emotion="css n9i4z4">.css-n9i4z4{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;white-space:nowrap;vertical-align:middle;outline:2px solid transparent;outline-offset:2px;line-height:1.2;border-radius:var(--chakra-radii-md);transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-normal);height:var(--chakra-sizes-10);min-width:var(--chakra-sizes-10);-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);font-size:var(--chakra-fontSizes-sm);font-weight:600;color:var(--chakra-colors-white);background:var(--chakra-colors-green-400);}.css-n9i4z4:focus-visible,.css-n9i4z4[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-n9i4z4:disabled,.css-n9i4z4[disabled],.css-n9i4z4[aria-disabled=true],.css-n9i4z4[data-disabled]{opacity:0.4;cursor:not-allowed;box-shadow:var(--chakra-shadows-none);}.css-n9i4z4:active,.css-n9i4z4[data-active]{background:var(--chakra-colors-gray-300);}.css-n9i4z4:hover,.css-n9i4z4[data-hover]{background:var(--chakra-colors-green-300);}</style><button type="button" class="chakra-button css-n9i4z4" href="https://www.linkedin.com/in/andreysaf/">Get in touch</button></a></div></div><div class="chakra-collapse" style="overflow:hidden;display:none;opacity:0;height:0px"><style data-emotion="css 1aylv9m">.css-1aylv9m{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:0.5rem;background:var(--chakra-colors-white);padding:var(--chakra-space-4);}@media screen and (min-width: 48em){.css-1aylv9m{display:none;}}</style><div class="chakra-stack css-1aylv9m"><style data-emotion="css 1811skr">.css-1811skr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-4);}</style><div class="chakra-stack css-1811skr"><style data-emotion="css lxmzlz">.css-lxmzlz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-top:var(--chakra-space-2);padding-bottom:var(--chakra-space-2);}.css-lxmzlz:hover,.css-lxmzlz[data-hover]{-webkit-text-decoration:none;text-decoration:none;}</style><style data-emotion="css wnxme9">.css-wnxme9{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);cursor:pointer;-webkit-text-decoration:none;text-decoration:none;outline:2px solid transparent;outline-offset:2px;color:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding-top:var(--chakra-space-2);padding-bottom:var(--chakra-space-2);}.css-wnxme9:hover,.css-wnxme9[data-hover]{-webkit-text-decoration:underline;text-decoration:underline;}.css-wnxme9:focus-visible,.css-wnxme9[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}.css-wnxme9:hover,.css-wnxme9[data-hover]{-webkit-text-decoration:none;text-decoration:none;}</style><a class="chakra-link css-wnxme9" href="/"><style data-emotion="css 9y4vnp">.css-9y4vnp{font-weight:600;color:var(--chakra-colors-gray-600);}</style><p class="chakra-text css-9y4vnp">Home</p></a><div class="chakra-collapse" style="overflow:hidden;display:none;margin-top:0!important;opacity:0;height:0px"><style data-emotion="css thv72w">.css-thv72w{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:start;-webkit-box-align:start;-ms-flex-align:start;align-items:start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:0.5rem;margin-top:var(--chakra-space-2);padding-left:var(--chakra-space-4);border-left:1px;border-style:solid;border-color:var(--chakra-colors-gray-200);}</style><div class="chakra-stack css-thv72w"></div></div></div><div class="chakra-stack css-1811skr"><a class="chakra-link css-wnxme9" href="/portfolio"><p class="chakra-text css-9y4vnp">Portfolio</p></a><div class="chakra-collapse" style="overflow:hidden;display:none;margin-top:0!important;opacity:0;height:0px"><div class="chakra-stack css-thv72w"></div></div></div><div class="chakra-stack css-1811skr"><a class="chakra-link css-wnxme9" href="/blog"><p class="chakra-text css-9y4vnp">Blog</p></a><div class="chakra-collapse" style="overflow:hidden;display:none;margin-top:0!important;opacity:0;height:0px"><div class="chakra-stack css-thv72w"></div></div></div></div></div></div><style data-emotion="css 17k0tgb">.css-17k0tgb{width:100%;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);max-width:var(--chakra-sizes-5xl);padding:var(--chakra-space-12);}</style><div class="chakra-container css-17k0tgb"><style data-emotion="css e133ed">.css-e133ed{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-2);padding-top:40px;}</style><div class="chakra-stack css-e133ed"><style data-emotion="css rszk63">.css-rszk63{margin-bottom:var(--chakra-space-4);}</style><nav aria-label="breadcrumb" class="chakra-breadcrumb css-rszk63"><style data-emotion="css 70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><ol class="chakra-breadcrumb__list css-70qvj9"><style data-emotion="css 18biwo">.css-18biwo{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><li class="chakra-breadcrumb__list-item css-18biwo"><style data-emotion="css 1u2cnya">.css-1u2cnya{transition-property:var(--chakra-transition-property-common);transition-duration:var(--chakra-transition-duration-fast);transition-timing-function:var(--chakra-transition-easing-ease-out);outline:2px solid transparent;outline-offset:2px;color:inherit;-webkit-text-decoration:var(--breadcrumb-link-decor);text-decoration:var(--breadcrumb-link-decor);--breadcrumb-link-decor:none;}.css-1u2cnya:not([aria-current=page]){cursor:pointer;}.css-1u2cnya:not([aria-current=page]):hover,.css-1u2cnya:not([aria-current=page])[data-hover]{--breadcrumb-link-decor:underline;}.css-1u2cnya:not([aria-current=page]):focus-visible,.css-1u2cnya:not([aria-current=page])[data-focus-visible]{box-shadow:var(--chakra-shadows-outline);}</style><a href="/" class="chakra-breadcrumb__link css-1u2cnya">Home</a><style data-emotion="css t4q1nq">.css-t4q1nq{-webkit-margin-start:0.5rem;margin-inline-start:0.5rem;-webkit-margin-end:0.5rem;margin-inline-end:0.5rem;}</style><span role="presentation" class="css-t4q1nq">/</span></li><li class="chakra-breadcrumb__list-item css-18biwo"><a href="/blog" class="chakra-breadcrumb__link css-1u2cnya">Blog</a><span role="presentation" class="css-t4q1nq">/</span></li><li class="chakra-breadcrumb__list-item css-18biwo"><a href="#" class="chakra-breadcrumb__link css-1u2cnya">Migrate Next.js Project using react-ga to GA4</a></li></ol></nav><style data-emotion="css 1dklj6k">.css-1dklj6k{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);font-size:var(--chakra-fontSizes-3xl);line-height:1.33;}@media screen and (min-width: 48em){.css-1dklj6k{font-size:var(--chakra-fontSizes-4xl);line-height:1.2;}}</style><h1 class="chakra-heading css-1dklj6k">How to Migrate Next.js or React Project using react-ga to GA4?</h1><style data-emotion="css itvw0n">.css-itvw0n{font-size:var(--chakra-fontSizes-sm);}</style><p class="chakra-text css-itvw0n">May 27th, 2023</p><style data-emotion="css 186a13v">.css-186a13v{object-fit:cover;padding:var(--chakra-space-10);}</style><img alt="Next.js logo and Google Analytics logo from Wiki Commons" src="/blog/next-js-ga4.jpeg" class="chakra-image css-186a13v"/><style data-emotion="css i3jkqk">.css-i3jkqk{font-size:var(--chakra-fontSizes-lg);}</style><p class="chakra-text css-i3jkqk">In this blog, we will go over how you can migrate from Google Universal Analytics to Google Analytics 4 in your Next.js web app if you are using <a class="chakra-link css-spn4bz" href="https://www.npmjs.com/package/react-ga" style="text-decoration:underline">react-ga</a>. Google UA will stop working on July 1st, 2023 so it is a good idea to do it beforehand. <a class="chakra-link css-spn4bz" href="https://www.npmjs.com/package/react-ga" style="text-decoration:underline">react-ga</a> is a popular package that has been used to make Google Analytics a breeze in React apps. <a class="chakra-link css-spn4bz" href="https://www.npmjs.com/package/react-ga4" style="text-decoration:underline">react-ga4</a> adds support for GA4. Now it is worth mentioning that react-ga4 was not written by the same creators as react-ga. There is also a license change from react-ga to react-ga4. react-ga is distributed under Apache 2.0, whereas react-ga4 is under MIT.</p><p class="chakra-text css-i3jkqk">In this guide, you will learn:</p><style data-emotion="css 1hvtyap">.css-1hvtyap{list-style-type:initial;-webkit-margin-start:1em;margin-inline-start:1em;padding-top:var(--chakra-space-3);font-size:var(--chakra-fontSizes-lg);}</style><ul role="list" class="css-1hvtyap"><li class="css-0"><a class="chakra-link css-spn4bz" href="#get-ga4-property" style="text-decoration:underline">How to get your GA4 property</a></li><li class="css-0"><a class="chakra-link css-spn4bz" href="#setup-reactga4" style="text-decoration:underline">How to setup react-ga4</a></li><li class="css-0"><a class="chakra-link css-spn4bz" href="#install-reactga4" style="text-decoration:underline">How to switch react-ga to react-ga4</a></li><li class="css-0"><a class="chakra-link css-spn4bz" href="#add-ga4-property" style="text-decoration:underline">How to add GA4 property to react-ga4</a></li><li class="css-0"><a class="chakra-link css-spn4bz" href="#receive-ga4-data" style="text-decoration:underline">How to start receiving data in Google Analytics</a></li></ul><p class="chakra-text css-i3jkqk">I will assume that you already have the Next.js app and react-ga configured. This guide is also applicable to a React app as well.</p><style data-emotion="css 1jfam2z">.css-1jfam2z{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);font-size:var(--chakra-fontSizes-xl);line-height:1.2;padding-top:var(--chakra-space-5);}</style><h3 class="chakra-heading css-1jfam2z"><a id="get-ga4-property">Get GA4 Property</a></h3><p class="chakra-text css-i3jkqk">To get your GA4 property, you can do so by logging into your <a class="chakra-link css-spn4bz" href="https://analytics.google.com/analytics/web/" style="text-decoration:underline">Google Analytics</a>. If you have not set up your GA4, you will have a whole bunch of warnings, banners, and popups telling you to do so. You can follow any of them to get to the setup assistant. If for some reason you are not getting any of the popups, you can follow the official <a class="chakra-link css-spn4bz" href="https://support.google.com/analytics/answer/9744165" style="text-decoration:underline">guide by Google</a>.</p><p class="chakra-text css-i3jkqk">You will need a measurement ID that will look like this: G-XXXXXXXXXX. Save it, you will need it for the next step.</p><h3 class="chakra-heading css-1jfam2z"><a id="setup-reactga4">Setup react-ga4 in your Next.js project</a></h3><p class="chakra-text css-i3jkqk">If you have not set up react-ga or react-ga4, you can follow along here. First, go ahead and install react-ga4.</p><style data-emotion="css lqvy6z">.css-lqvy6z{display:inline-block;font-family:var(--chakra-fonts-mono);font-size:var(--chakra-fontSizes-sm);-webkit-padding-start:0.2em;padding-inline-start:0.2em;-webkit-padding-end:0.2em;padding-inline-end:0.2em;border-radius:var(--chakra-radii-sm);background:var(--badge-bg);color:var(--badge-color);box-shadow:var(--badge-shadow);--badge-bg:var(--chakra-colors-gray-100);--badge-color:var(--chakra-colors-gray-800);}.chakra-ui-dark .css-lqvy6z:not([data-theme]),[data-theme=dark] .css-lqvy6z:not([data-theme]),.css-lqvy6z[data-theme=dark]{--badge-bg:rgba(226, 232, 240, 0.16);--badge-color:var(--chakra-colors-gray-200);}</style><code class="chakra-code css-lqvy6z">npm i react-ga4</code><p class="chakra-text css-i3jkqk">Add a new file called `components/googleAnalytics.js` in your project and paste the following:</p><style data-emotion="css 10wdj0v">.css-10wdj0v{font-family:var(--chakra-fonts-mono);font-size:var(--chakra-fontSizes-sm);-webkit-padding-start:0.2em;padding-inline-start:0.2em;-webkit-padding-end:0.2em;padding-inline-end:0.2em;border-radius:var(--chakra-radii-sm);background:var(--badge-bg);color:var(--badge-color);box-shadow:var(--badge-shadow);--badge-bg:var(--chakra-colors-gray-100);--badge-color:var(--chakra-colors-gray-800);display:block;white-space:pre;width:100%;}.chakra-ui-dark .css-10wdj0v:not([data-theme]),[data-theme=dark] .css-10wdj0v:not([data-theme]),.css-10wdj0v[data-theme=dark]{--badge-bg:rgba(226, 232, 240, 0.16);--badge-color:var(--chakra-colors-gray-200);}</style><code class="chakra-code css-10wdj0v">import ReactGA from &quot;react-ga4&quot;
 
export const initGA = () =&gt; {
  ReactGA.initialize(&quot;G-XXXXXXX&quot;)
}
  
export const logPageView = () =&gt; {
  ReactGA.send({ hitType: &#x27;pageview&#x27;, 
  page: window.location.pathname, 
  title: window.document.title 
})
}</code><p class="chakra-text css-i3jkqk">Then create another file called `components/layout.js` in your project and paste the following:</p><code class="chakra-code css-10wdj0v">import React, { useEffect } 
from &quot;react&quot;;
import { initGA, logPageView } 
from &quot;./googleAnalytics.js&quot;;

const Layout = (props) =&gt; {

useEffect(() =&gt; {
  if (!window.GA_INITIALIZED) {
    initGA();
    window.GA_INITIALIZED = true;
  }
  logPageView();
});

return (
  &lt;div&gt;{props.children}&lt;/div&gt;
);

};

export default Layout;</code><p class="chakra-text css-i3jkqk">Then you can wrap any page in the layout component to track it.</p><code class="chakra-code css-10wdj0v">import Layout from &#x27;../../components/layout&#x27;;

export const myPage = () =&gt; {
  return {
    &lt;Layout&gt;
      &lt;div&gt;Hello World&lt;div/&gt;
    &lt;/Layout&gt;
  }
}
              </code><h3 class="chakra-heading css-1jfam2z"><a id="install-reactga4">Remove React-GA and Install React-GA4</a></h3><p class="chakra-text css-i3jkqk">Run the following command to remove react-ga:</p><code class="chakra-code css-lqvy6z">npm uninstall react-ga</code><p class="chakra-text css-i3jkqk">Then install react-ga4:</p><code class="chakra-code css-lqvy6z">npm install react-ga4</code><h3 class="chakra-heading css-1jfam2z"><a id="add-ga4-property">Add Your GA4 Property to React-GA4</a></h3><p class="chakra-text css-i3jkqk">Wherever you have initialized your react-ga, open that file. For me, I created a separate file called googleAnalytics.js. Inside of the file swap the UA property in initialize call to the new measurement ID.</p><code class="chakra-code css-lqvy6z">ReactGA.initialize(&quot;G-XXXXXXX&quot;)</code><p class="chakra-text css-i3jkqk">Then wherever you track the page view event, remove set and pageview calls and replace them with send function.</p><code class="chakra-code css-lqvy6z">ReactGA.send({ hitType: &#x27;pageview&#x27;, page: window.location.pathname, title: window.document.title })</code><h3 class="chakra-heading css-1jfam2z"><a id="receive-ga4-data">Start Receiving Data in Google Analytics</a></h3><p class="chakra-text css-i3jkqk">At this point, if you refresh the page a couple of times, you should start seeing data flow in <a class="chakra-link css-spn4bz" href="https://analytics.google.com/analytics/web/" style="text-decoration:underline">Google Analytics</a>.</p><p class="chakra-text css-i3jkqk">Now you also want to ensure that GA scripts are allowed. I was using Brave which automatically blocks GA scripts and did not see the data reflected until I turned off the shields.</p><h3 class="chakra-heading css-1jfam2z">Next Steps</h3><p class="chakra-text css-i3jkqk">I hope you enjoyed this post. If you have any questions, reach out on my <a class="chakra-link css-spn4bz" href="https://www.linkedin.com/in/andreysaf/" style="text-decoration:underline">LinkedIn</a>.</p></div></div><style data-emotion="css 1qa2j5w">.css-1qa2j5w{background:var(--chakra-colors-gray-50);color:var(--chakra-colors-gray-700);width:100%;}</style><div class="css-1qa2j5w"><style data-emotion="css xin9bn">.css-xin9bn{width:100%;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);max-width:var(--chakra-sizes-6xl);padding-top:var(--chakra-space-4);padding-bottom:var(--chakra-space-4);}@media screen and (min-width: 48em){.css-xin9bn{padding-top:var(--chakra-space-8);padding-bottom:var(--chakra-space-8);}}</style><style data-emotion="css hwculx">.css-hwculx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:left;-webkit-box-align:left;-ms-flex-align:left;align-items:left;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-4);width:100%;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;-webkit-padding-start:var(--chakra-space-4);padding-inline-start:var(--chakra-space-4);-webkit-padding-end:var(--chakra-space-4);padding-inline-end:var(--chakra-space-4);max-width:var(--chakra-sizes-6xl);padding-top:var(--chakra-space-4);padding-bottom:var(--chakra-space-4);}@media screen and (min-width: 48em){.css-hwculx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}@media screen and (min-width: 48em){.css-hwculx{padding-top:var(--chakra-space-8);padding-bottom:var(--chakra-space-8);}}</style><div class="chakra-stack chakra-container css-hwculx"><style data-emotion="css w59kal">.css-w59kal{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:0.5rem;padding:var(--chakra-space-2);}</style><div class="chakra-stack css-w59kal"><a class="chakra-link css-spn4bz" href="/"><p class="chakra-text css-0">Andrey Safonov</p></a></div><style data-emotion="css 14xutru">.css-14xutru{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;gap:var(--chakra-space-6);padding:var(--chakra-space-2);}</style><div class="chakra-stack css-14xutru"><a class="chakra-link css-spn4bz" href="/portfolio"><style data-emotion="css 479vt2">.css-479vt2{font-family:var(--chakra-fonts-heading);font-weight:var(--chakra-fontWeights-bold);font-size:var(--chakra-fontSizes-sm);line-height:1.2;}</style><h2 class="chakra-heading css-479vt2">Portfolio</h2></a><a class="chakra-link css-spn4bz" href="/blog"><h2 class="chakra-heading css-479vt2">Blog</h2></a></div><style data-emotion="css c3tkal">.css-c3tkal{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;gap:var(--chakra-space-8);padding:var(--chakra-space-2);}</style><div class="chakra-stack css-c3tkal"><a target="_blank" rel="noopener" class="chakra-link css-spn4bz" href="https://www.linkedin.com/in/andreysaf/"><svg aria-label="Linkedin" viewBox="0 0 24 24" class="StyledIcon-sc-ofa7kd-0 ctddgS"><path fill="#0077B5" fill-rule="evenodd" d="M20.452 20.45h-3.56v-5.57c0-1.328-.022-3.036-1.85-3.036-1.851 0-2.134 1.447-2.134 2.942v5.664H9.352V8.997h3.413v1.566h.049c.475-.9 1.636-1.85 3.367-1.85 3.605 0 4.27 2.371 4.27 5.456v6.281zM5.339 7.433a2.063 2.063 0 1 1 0-4.13 2.065 2.065 0 0 1 0 4.13zM7.12 20.45H3.558V8.997H7.12V20.45zM23 0H1a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h22a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg></a><a target="_blank" rel="noopener" class="chakra-link css-spn4bz" href="https://github.com/andreysaf"><svg aria-label="Github" viewBox="0 0 24 24" class="StyledIcon-sc-ofa7kd-0 ctddgS"><path fill="#333" fill-rule="evenodd" d="M11.999 1C5.926 1 1 5.925 1 12c0 4.86 3.152 8.983 7.523 10.437.55.102.75-.238.75-.53 0-.26-.009-.952-.014-1.87-3.06.664-3.706-1.475-3.706-1.475-.5-1.27-1.221-1.61-1.221-1.61-.999-.681.075-.668.075-.668 1.105.078 1.685 1.134 1.685 1.134.981 1.68 2.575 1.195 3.202.914.1-.71.384-1.195.698-1.47-2.442-.278-5.01-1.222-5.01-5.437 0-1.2.428-2.183 1.132-2.952-.114-.278-.491-1.397.108-2.91 0 0 .923-.297 3.025 1.127A10.536 10.536 0 0 1 12 6.32a10.49 10.49 0 0 1 2.754.37c2.1-1.424 3.022-1.128 3.022-1.128.6 1.514.223 2.633.11 2.911.705.769 1.13 1.751 1.13 2.952 0 4.226-2.572 5.156-5.022 5.428.395.34.747 1.01.747 2.037 0 1.47-.014 2.657-.014 3.017 0 .295.199.637.756.53C19.851 20.979 23 16.859 23 12c0-6.075-4.926-11-11.001-11"></path></svg></a><a target="_blank" rel="noopener" class="chakra-link css-spn4bz" href="https://andreysaf.medium.com/"><svg aria-label="Medium" viewBox="0 0 24 24" class="StyledIcon-sc-ofa7kd-0 ctddgS"><path fill="#000" d="M6.783 5a6.783 6.783 0 1 0 0 13.565A6.783 6.783 0 0 0 6.783 5Zm10.695.522c-1.873 0-3.391 2.803-3.391 6.26 0 .65.053 1.274.152 1.862.132.784.346 1.502.622 2.121.138.31.292.594.46.849.335.51.724.904 1.149 1.148.319.183.657.282 1.008.282s.69-.1 1.009-.282c.425-.244.814-.638 1.149-1.148.167-.255.321-.54.46-.849.276-.618.49-1.337.621-2.12.1-.589.153-1.214.153-1.862 0-3.458-1.519-6.261-3.392-6.261Zm5.218.521c-.136 0-.266.09-.388.259-.082.111-.16.257-.234.434a4.007 4.007 0 0 0-.107.288c-.07.206-.134.441-.193.7-.118.52-.214 1.138-.28 1.825a22.61 22.61 0 0 0-.103 2.234 24.502 24.502 0 0 0 .103 2.234c.066.686.162 1.305.28 1.824.059.26.123.495.193.7.034.104.07.2.107.288.074.177.153.323.234.435.122.168.253.258.388.258.72 0 1.304-2.57 1.304-5.74 0-3.169-.584-5.739-1.304-5.739Z"></path></svg></a></div></div></div></div><span></span><span id="__chakra_env" hidden=""></span></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{}},"page":"/blog/how-to-migrate-nextjs-react-ga4","query":{},"buildId":"edh5nBDpJ_MxrmNTg5BEV","nextExport":true,"autoExport":true,"isFallback":false,"scriptLoader":[]}</script></body></html>